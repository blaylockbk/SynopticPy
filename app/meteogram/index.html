<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    
    <title>Meteogram | SynopticPy App</title>
    

    <!---->
    
<link
  rel="icon"
  type="image/jpeg"
  href="https://raw.githubusercontent.com/blaylockbk/SynopticPy/main/images/Balloon_logo/square_balloon.jpg"
/>


<link
  href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
  rel="stylesheet"
  integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
  crossorigin="anonymous"
/>
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
  crossorigin="anonymous"
></script>
<script src="/SynopticPy/app/assets/js/themeSwitcher.js"></script>


<style>
  @font-face {
    font-family: "Mona Sans";
    src: url("/SynopticPy/app/assets/fonts/Mona-Sans.woff2") format("woff2");
  }
</style>


<link rel="stylesheet" href="/SynopticPy/app/assets/css/style.css" />


<script
  src="https://kit.fontawesome.com/f6cc126dcc.js"
  crossorigin="anonymous"
></script>

    <!---->
    
<link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />

<!-- Comment this line to turn off loading pyscript (only render page) -->
<!--  -->
<!--  -->
<script defer src="https://pyscript.net/latest/pyscript.js"></script>
<!--  -->
<!--  -->
<!--  -->
  </head>

  <body>
    <nav
  class="navbar bg-dark border-bottom border-bottom-dark"
  data-bs-theme="dark"
>
  <div class="container-fluid">
    <!-- Title -->
    <a class="navbar-brand"
      >SynopticPy App <small class="text-secondary ms-3 d-none d-md-inline-block">Meteogram</small></a
    >

    <div class="d-flex gap-2">
      
      <div class="dropdown">
        <button
          class="btn btn-dark dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
        >
          Pages
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <a class="dropdown-item " href="/SynopticPy/app/timeseries/"
              >Timeseries</a
            >
          </li>
          <li>
            <a class="dropdown-item active" href="/SynopticPy/app/meteogram/">Meteogram</a>
          </li>
        </ul>
      </div>

      
      <div class="dropdown">
        <button
          class="btn btn-dark"
          type="button"
          data-bs-toggle="dropdown"
          aria-expanded="false"
          id="bd-theme"
          title="Select Theme"
        >
          <i class="fas fa-adjust"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <button class="dropdown-item" data-bs-theme-value="auto">
              <i class="fas fa-adjust me-2"></i> Auto
            </button>
          </li>
          <li>
            <button class="dropdown-item" data-bs-theme-value="light">
              <i class="fas fa-sun me-2"></i> Light
            </button>
          </li>
          <li>
            <button class="dropdown-item" data-bs-theme-value="dark">
              <i class="fas fa-moon me-2"></i> Dark
            </button>
          </li>
        </ul>
      </div>
      
      
      <a href="https://github.com/blaylockbk/SynopticPy" target="_blank" class="btn btn-dark" title="SynopticPy on GitHub">
        <span class="sr-only">GitHub</span>
        <i class="fa-brands fa-github"></i>
      </a>
    </div>
  </div>
</nav>


    <main>
<div class="container my-4">
  <div class="d-flex justify-content-between">
    <h1>Meteogram</h1>
    <div>
      <button
  type="button"
  class="btn btn-primary"
  data-bs-toggle="modal"
  data-bs-target="#exampleModal"
>
  README
</button>
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h1 class="modal-title fs-5" id="exampleModalLabel">
          Brian Blaylock's Station Timeseries Web App
        </h1>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body" style="font-size: 15px; text-align: left">
        This app gets data from the Synoptic Mesonet API, reads it with Pandas,
        and plots a timeseries of the data with matplotlib. This is all done in
        your browser powered by
        <a href="https://pyscript.net/">pyscript</a>. The primary use of this
        app is to plot a timeseries of data from multiple stations in a single
        plot.

        <hr />
        <strong>Token:</strong>
        You may insert your own
        <a
          href="https://developers.synopticdata.com/mesonet/v2/getting-started/"
          target="_blank"
          >Synoptic API token</a
        >
        below. If left blank, you will use one of my free-tier tokens
        <i
          >which may be limited if more than 4+ people are using this page at
          the same time</i
        >. Using your own token prevents running into this problem and gives you
        access to features you may have for your account.
        <div class="input-group mb-3">
          <span class="input-group-text" id="token">Token</span>
          <input
            type="text"
            id="tokenInput"
            class="form-control"
            placeholder="Synoptic API Token"
          />
        </div>

        <hr />
        <strong>Stations:</strong> A comma-separated list of station IDs, e.g.
        <kbd>PSRIM,PSINK</kbd>. If you don't know the station ID, you can search
        on <a href="https://mesowest.utah.edu/" target="_blank">Mesowest</a>.

        <div class="accordion" id="accordionExample">
          <div class="accordion-item">
            <h2 class="accordion-header">
              <button
                class="accordion-button collapsed"
                type="button"
                data-bs-toggle="collapse"
                data-bs-target="#collapseThree"
                aria-expanded="false"
                aria-controls="collapseThree"
              >
                Backdoor: Advanced Station Selector
              </button>
            </h2>
            <div
              id="collapseThree"
              class="accordion-collapse collapse"
              data-bs-parent="#accordionExample"
            >
              <div class="accordion-body">
                <p>
                  With some knowledge of the Synoptic Mesonet API, you can make
                  more complex station queries. Instead of a list of stations,
                  you can instead provide
                  <a
                    target="_blank"
                    href="https://developers.synopticdata.com/mesonet/v2/stations/timeseries/"
                    >station selection parameters</a
                  >
                  to refine your station selection. This is inerted in the API
                  request, so you need to separate each argument with a
                  <code>&</code>. For example:
                </p>

                <ul class="spaced-list">
                  <li>
                    <kbd>radius=wbb,5</kbd> All stations within a 5 mile radius
                    of <code>WBB</code>.
                  </li>
                  <li>
                    <kbd>radius=wbb,5&limit=10</kbd>
                    <code>10</code> stations nearest <code>WBB</code> within a
                    <code>5</code> mile radius.
                  </li>
                  <li>
                    <kbd>radius=WBB,5&limit=10&stid=!MTMET</kbd> Same as above,
                    but exclude the station <code>MTMET</code>.
                  </li>
                  <li>
                    <kbd>radius=WBB,20&network=153</kbd> Stations within
                    <code>20</code> miles of <code>WBB</code> that belong to the
                    <code>UUNET</code> network. (See list of
                    <a
                      href="https://developers.synopticdata.com/about/station-providers/"
                      >network providers</a
                    >.)
                  </li>
                  <li>
                    <kbd>radius=KSLC,40&network=1,2&limit=8</kbd>
                    <code>8</code> stations within <code>40</code> miles of
                    <code>KSLC</code> that belong to the
                    <code>ASOS/AWOS</code> and <code>RAWS</code> networks. (See
                    list of
                    <a
                      href="https://developers.synopticdata.com/about/station-providers/"
                      >network providers</a
                    >.)
                  </li>
                  <li>
                    <kbd>radius=41.5,-120.25,20&limit=10</kbd>
                    <code>10</code> stations within <code>20</code> miles of the
                    <code>latitude,longitude</code>
                    location.
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <br />

        <hr />
        <strong>Variable:</strong> Select the variable you wish to plot.

        <hr />
        There are three ways to specify the plot's time range:
        <ol>
          <li>
            "Start at <code>[datetime]</code> and end at
            <code>[datetime]</code>."
          </li>
          <li>
            "Start at <code>[datetime]</code> and end
            <code>[timedelta]</code> later."
          </li>
          <li>
            "Start <code>[timedelta]</code> before the end
            <code>[datetime]</code>."
          </li>
        </ol>

        <strong>Start Time:</strong> Specify the starting time for the plot.
        This must be a Pandas-parsable datetime string
        <kbd>YYYY-MM-DD HH:MM</kbd> <i>or</i> if an End datetime is given, a
        Pandas-parsable timedelta such as <kbd>30min</kbd> for 30 minutes,
        <kbd>12H</kbd> for 12 hours, <kbd>3D</kbd> for 3 days.
        <br />
        <br />
        <strong>End Time:</strong> Specify the ending time for the plot. This
        must be a Pandas-parsable datetime string <kbd>YYYY-MM-DD HH:MM</kbd>
        <i>or</i> if a Start datetime is given, a Pandas-parsable timedelta such
        as <kbd>30min</kbd> for 30 minutes, <kbd>12H</kbd> for 12 hours,
        <kbd>3D</kbd> for 3 days.
        <hr />
        <strong>Smoother:</strong>
        You can "smooth" the data using two different methods built into Pandas:

        <ol>
          <li>
            <a
              href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.resample.html"
              target="_blank"
              >Resample</a
            >: Reduces the amount of data points to interval selected by
            computing a statistic for the time window. This is useful for
            showing the "daily maximum temperature" for the time period.
          </li>
          <li>
            <a
              href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.rolling.html"
              target="_blank"
              >Rolling</a
            >: Returns the same amount of data points but value (i.e. mean, max,
            min) is computed over a rolling time window.
          </li>
        </ol>
        Also specify the time window (as a Pandas-parsable timedelta) and the
        statistic to compute in the time window (e.g. Mean). WARNING: A proper
        average for wind_direction is not yet implemented.

        <hr />
        <strong>Colors:</strong>
        Specify the colors you want each line. Maybe you have lots of stations
        plotted, but want to highlight only one; you can make that station "red"
        and the others a shade of grey. Note that colors are reused if there are
        more stations than colors.

        <hr />
        <strong>Toggles:</strong>
        Toggle units to be returned in English or Metric units. Also toggle if
        time is local or UTC.
      </div>
      <div class="modal-footer">
        <div style="font-size: 12px">
          <i class="fa-brands fa-github"></i>
          <a href="https://github.com/blaylockbk/SynopticPy" target="_blank"
            >SynopticPy </a
          >|
          <a
            href="https://github.com/blaylockbk/SynopticPy/issues"
            target="_blank"
            >Submit Issue</a
          >|
          <a
            href="https://github.com/blaylockbk/SynopticPy/discussions"
            target="_blank"
            >Ask Question</a
          >|

          <a
            href="https://github.com/blaylockbk/SynopticPy/blob/main/web/timeseries.html"
            target="_blank"
            >Edit Page</a
          >|
          <a
            href="https://github.com/blaylockbk/SynopticPy/blob/main/web/timeseries.py"
            target="_blank"
            >Edit Plot</a
          >
          <br />
        </div>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
          Close
        </button>
      </div>
    </div>
  </div>
</div>

    </div>
  </div>
  <div align="center" class="contentText form-group">
    <!-- FIRST ROW -->
    <div class="row align-items-center">
      <div class="col-sm-4">
        <!-- Station Selector ----------------------->
        <div class="input-group mb-3">
          <span class="input-group-text" id="stid">Station</span>
          <input
            type="text"
            id="stidInput"
            class="form-control"
            value="WBB"
            title="Station ID or `latitude,longitude` pair"
          />
        </div>
      </div>
      <div class="col-sm-4">
        <!-- Variable ----------------------->
        <div class="input-group mb-3">
          <label class="input-group-text" for="variable">Variable</label>
          <select class="form-select" id="variableSelector_1">
            <option selected="selected" value="air_temp">
              üå°Ô∏è Air Temperature
            </option>
            <option value="dew_point_temperature">üí¶ Dew Point</option>
            <option value="relative_humidity">üíß Relative Humidity</option>
            <option value="pressure">üéà Pressure</option>
            <option value="sea_level_pressure">‚õµ Sea Level Pressure</option>
            <option value="altimeter">üèîÔ∏è Altimiter</option>
            <option value="snow_depth">‚ùÑÔ∏è Snow Depth</option>
            <option value="solar_radiation">‚òÄÔ∏è Solar Radiation</option>
            <option value="PM_25_concentration">üè≠ PM 2.5 Concentration</option>
            <option value="ozone_concentration">üòé Ozone Concentration</option>
            <option value="volt">üîã Battery Voltage</option>
          </select>
        </div>
      </div>
      <div class="col-sm-4">
        <!-- Variable ----------------------->
        <div class="input-group mb-3">
          <label class="input-group-text" for="variable">Variable</label>
          <select class="form-select" id="variableSelector_2">
            <option selected="selected" value="air_temp">
              üå°Ô∏è Air Temperature
            </option>
            <option value="dew_point_temperature">üí¶ Dew Point</option>
            <option value="relative_humidity">üíß Relative Humidity</option>
            <option value="pressure">üéà Pressure</option>
            <option value="sea_level_pressure">‚õµ Sea Level Pressure</option>
            <option value="altimeter">üèîÔ∏è Altimiter</option>
            <option value="snow_depth">‚ùÑÔ∏è Snow Depth</option>
            <option value="solar_radiation">‚òÄÔ∏è Solar Radiation</option>
            <option value="PM_25_concentration">üè≠ PM 2.5 Concentration</option>
            <option value="ozone_concentration">üòé Ozone Concentration</option>
            <option value="volt">üîã Battery Voltage</option>
          </select>
        </div>
      </div>
    </div>
    <!-- SECOND ROW -->
    <div class="row align-items-center">
      <div class="col-sm-6">
        <!-- Start Time ----------------------->
        <div class="input-group mb-3">
          <span class="input-group-text" id="startTime">Start time (UTC)</span>
          <input
            type="text"
            id="startTimeInput"
            class="form-control"
            value="18H"
            title="Pandas-parsable datetime (e.g., YYYY-MM-DD HH:MM) or timedelta (e.g., 30min, 1H, 6H)"
          />
        </div>
      </div>
      <div class="col-sm-6">
        <!-- End Time ----------------------->
        <div class="input-group mb-3">
          <span class="input-group-text" id="endTime">End time (UTC)</span>
          <input
            type="text"
            class="form-control"
            id="endTimeInput"
            placeholder="YYYY-MM-DD HH:MM"
            title="Pandas-parsable datetime (e.g., YYYY-MM-DD HH:MM) or timedelta (e.g., 30min, 1H, 6H)"
          />
        </div>
        <script>
          // Get the input element by ID
          var endTimeInput = document.getElementById("endTimeInput");

          // Create a new Date object with the current datetime
          var currentDate = new Date();

          // Format the datetime as YYYY-MM-DD HH:MM
          var formattedDatetime = currentDate
            .toISOString()
            .slice(0, 16)
            .replace("T", " ");

          // Set the formatted datetime as the value of the input element
          endTimeInput.value = formattedDatetime;
        </script>
      </div>
    </div>

    <!-- FOURTH ROW -->
    <div class="row align-items-center">
      <div class="col-sm-6">
        <!-- Smoother ----------------------->
        <div class="input-group mb-3">
          <div class="input-group mb-3">
            <label class="input-group-text" for="smoothing">Smoother</label>
            <select class="form-select" id="smootherSelector1">
              <option selected="selected" value="none">None</option>
              <option value="resample">Resample</option>
              <option value="rolling">Rolling</option>
            </select>
            <input
              type="text"
              id="smootherInput"
              class="form-control"
              value="30min"
              title="Pandas-parsable timedelta (e.g., 30min, 1H, 6H)"
            />
            <select class="form-select" id="smootherSelector2">
              <option selected="selected" value="none">None</option>
              <option value="mean">Mean</option>
              <option value="max">Max</option>
              <option value="min">Min</option>
              <option value="median">Median</option>
              <option value="std">Standard Deviation</option>
              <option value="var">Variance</option>
              <option value="count">Count</option>
              <option value="spread" disabled>Spread</option>
            </select>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <!-- Colors ----------------------->
        <!-- prettier-ignore -->
        <div class="input-group mb-3">
          <label class="input-group-text" for="colorCycle"
            >Colors</label
          >
          <input type="color" class="form-control form-control-color" name="color" value="#0d6efd" title="Choose color" id="color1">
          <input type="color" class="form-control form-control-color" name="color" value="#dc3545" title="Choose color" id="color2">
        </div>
      </div>
    </div>
    <!-- THIRD ROW -->
    <div class="row align-items-center">
      <!-- Units toggle----------------------->
      <div class="col-sm-3">
        <div class="input-group mb-3">
          <div class="btn-group" role="group" aria-label="Basic example">
            <input
              type="radio"
              class="btn-check"
              name="unitsRadioOptions"
              id="unitsRadio1"
              autocomplete="off"
              value="english"
              checked
            />
            <label class="btn btn-outline-dark" for="unitsRadio1"
              >English Units</label
            >
            <input
              type="radio"
              class="btn-check"
              name="unitsRadioOptions"
              id="unitsRadio2"
              autocomplete="off"
              value="metric"
            />
            <label class="btn btn-outline-dark" for="unitsRadio2"
              >Metric Units</label
            >
          </div>
        </div>
      </div>
      <!-- (Units toggle) -->
      <!-- timezone toggle----------------------->
      <div class="col-sm-3">
        <div class="input-group mb-3">
          <div class="btn-group" role="group" aria-label="Basic example">
            <input
              type="radio"
              class="btn-check"
              name="timezoneRadioOptions"
              id="timezoneRadio1"
              autocomplete="off"
              value="local"
              checked
            />
            <label class="btn btn-outline-dark" for="timezoneRadio1"
              >Local Time</label
            >
            <input
              type="radio"
              class="btn-check"
              name="timezoneRadioOptions"
              id="timezoneRadio2"
              autocomplete="off"
              value="utc"
            />
            <label class="btn btn-outline-dark" for="timezoneRadio2"
              >UTC Time</label
            >
          </div>
        </div>
      </div>
      <!-- (timezone toggle) -->
      <div class="col-sm-6">
        <!-- Submit Button -->
        <div class="form-group" style="padding-top: 10px">
          <div class="col-sm-4">
            <button
              type="submit"
              class="btn btn-success"
              py-click="main(display)"
              id="display"
            >
              Make Plot
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- CONTENT TABS  -->
  <ul class="nav nav-tabs mt-5" id="myTab" role="tablist">
    <li class="nav-item" role="presentation">
      <button
        class="nav-link active"
        id="timeseries-tab"
        data-bs-toggle="tab"
        data-bs-target="#timeseries-tab-pane"
        type="button"
        role="tab"
        aria-controls="timeseries-tab-pane"
        aria-selected="true"
      >
        Timeseries
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="station-tab"
        data-bs-toggle="tab"
        data-bs-target="#station-tab-pane"
        type="button"
        role="tab"
        aria-controls="station-tab-pane"
        aria-selected="false"
      >
        Station Info
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button
        class="nav-link"
        id="map-tab"
        data-bs-toggle="tab"
        data-bs-target="#map-tab-pane"
        type="button"
        role="tab"
        aria-controls="map-tab-pane"
        aria-selected="false"
      >
        Map
      </button>
    </li>
  </ul>
  <div class="tab-content" id="myTabContent">
    <div
      class="tab-pane fade show active"
      id="timeseries-tab-pane"
      role="tabpanel"
      aria-labelledby="timeseries-tab"
      tabindex="0"
    >
      <div id="figure-userVariables" align="center"></div>
      <div id="figure-windVariables" align="center"></div>
      <div id="figure-precVariables" align="center"></div>
    </div>

    <div
      class="tab-pane fade"
      id="station-tab-pane"
      role="tabpanel"
      aria-labelledby="station-tab"
      tabindex="0"
    >
      <div id="station-info"></div>
    </div>
    <div
      class="tab-pane fade"
      id="map-tab-pane"
      role="tabpanel"
      aria-labelledby="map-tab"
      tabindex="0"
    >
      <div id="figure-map" align="center"></div>
    </div>
    <py-terminal></py-terminal>
  </div>
</div>
</main>

    <footer class="text-bg-light border-top">
  <div
    class="container py-4 d-flex align-items-center justify-content-between gap-4"
  >
    <div class="d-flex align-items-center gap-2 lead">
      <strong>Related Projects:</strong>
      <a
        href="https://github.com/blaylockbk/Herbie"
        target="_blank"
        class="btn btn-light btn-sm"
        >üèÅ Herbie</a
      >
      <a
        href="https://github.com/blaylockbk/goes2go"
        target="_blank"
        class="btn btn-light btn-sm"
        >üåé GOES-2-go</a
      >
    </div>
    <div>
      <div>&copy; Brian Blaylock, 2023</div>
      
    </div>
  </div>
</footer>

  </body>
</html>
