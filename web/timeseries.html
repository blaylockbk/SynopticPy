<!DOCTYPE html>
<html data-bs-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Station Timeseries</title>
    <link
      rel="icon"
      type="image/jpeg"
      href="https://raw.githubusercontent.com/blaylockbk/SynopticPy/main/images/Balloon_logo/square_balloon.jpg"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM"
      crossorigin="anonymous"
    />
    <script src="./themeSwitcher.js"></script>
    <script
      src="https://kit.fontawesome.com/f6cc126dcc.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="https://pyscript.net/latest/pyscript.css" />

    <!-- Comment this line to turn off loading pyscript (only render page) -->
    <!--  -->
    <!--  -->
    <script defer src="https://pyscript.net/latest/pyscript.js"></script>
    <!--  -->
    <!--  -->
    <!--  -->

    <style>
      @font-face {
        font-family: "Mona Sans";
        src: url("./fonts/Mona-Sans.woff2") format("woff2");
      }

      body {
        font-family: "Mona Sans", sans-serif;
      }

      .spaced-list li {
        margin-bottom: 10px; /* Increase the margin-bottom value to increase spacing */
      }
    </style>
  </head>

  <body>
    <!-- prettier-ignore -->
    <py-config>
      packages = ["matplotlib", "pandas", "numpy", "scipy"]
      [[fetch]]
        files = ["./timeseries.py", "./fonts/Mona-Sans.ttf", "./fonts/Hubot-Sans.ttf", "./data/us-cities.csv"]
    </py-config>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz"
      crossorigin="anonymous"
    ></script>

    <script>
      // If Smoother method selector is none, then disable the interval and stat input,
      // but if user selects a smoother, then activate the interval and stat inputs.
      function checkInputValue() {
        var input1Value = document.getElementById("smootherSelector1").value;
        var input2 = document.getElementById("smootherInput");
        var input3 = document.getElementById("smootherSelector2");

        if (input1Value === "none") {
          input2.disabled = true;
          input3.disabled = true;
        } else {
          input2.disabled = false;
          input3.disabled = false;
        }
      }

      // Change Stations
      function changeStations(option) {
        if (option === "Peter Sinks") {
          document.getElementById("stidInput").value = "PSRIM,PSINK";
        } else if (option === "Monterey & Spanish Fork") {
          document.getElementById("stidInput").value = "KMRY,UKBKB";
        } else if (option === "Monterey, CA") {
          document.getElementById("stidInput").value =
            "radius=E4129,10&limit=10";
        } else if (option === "Family") {
          document.getElementById("stidInput").value =
            "KMRY,UKBKB,KLGU,C8948,E9049,KUMP";
        } else if (option === "John Horel") {
          document.getElementById("stidInput").value =
            "WBB,GNI,FREUT,LMR,BFLAT";
        } else if (option === "University of Utah") {
          document.getElementById("stidInput").value = "radius=WBB,10&limit=10";
        } else if (option === "Arches National Park") {
          document.getElementById("stidInput").value =
            "radius=38.73, -109.59,20&limit=10";
        } else if (option === "Western States") {
          document.getElementById("stidInput").value =
            "KSLC,KWMC,KBOI,KSEA,KEUG,KMRY,KSNA";
        }
      }

      // Change color scheme
      function changeColors(option) {
        if (option === "default") {
          // Tried to mimic the colors in the default bootstrap theme
          document.getElementById("color1").value = "#0d6efd";
          document.getElementById("color2").value = "#dc3545";
          document.getElementById("color3").value = "#fd7e14";
          document.getElementById("color4").value = "#198754";
          document.getElementById("color5").value = "#0dcaf0";
          document.getElementById("color6").value = "#563d7c";
          document.getElementById("color7").value = "#ffc107";
          document.getElementById("color8").value = "#262626";
          document.getElementById("color9").value = "#6610f2";
          document.getElementById("color10").value = "#20c997";
          document.getElementById("color11").value = "#e83e8c";
          document.getElementById("color12").value = "#a64dff";
        } else if (option === "greys") {
          // Invented by Brian Blaylock
          document.getElementById("color1").value = "#DC3545";
          document.getElementById("color2").value = "#979797";
          document.getElementById("color3").value = "#979797";
          document.getElementById("color4").value = "#979797";
          document.getElementById("color5").value = "#979797";
          document.getElementById("color6").value = "#979797";
          document.getElementById("color7").value = "#979797";
          document.getElementById("color8").value = "#979797";
          document.getElementById("color9").value = "#979797";
          document.getElementById("color10").value = "#979797";
          document.getElementById("color11").value = "#979797";
          document.getElementById("color12").value = "#979797";
        } else if (option === "fall") {
          // Invented by Brian Blaylock
          document.getElementById("color1").value = "#800000";
          document.getElementById("color2").value = "#e37a3e";
          document.getElementById("color3").value = "#4C721D";
          document.getElementById("color4").value = "#D8A60D";
          document.getElementById("color5").value = "#763712";
          document.getElementById("color6").value = "#6B2269";
          document.getElementById("color7").value = "#800000";
          document.getElementById("color8").value = "#e37a3e";
          document.getElementById("color9").value = "#4C721D";
          document.getElementById("color10").value = "#D8A60D";
          document.getElementById("color11").value = "#763712";
          document.getElementById("color12").value = "#6B2269";
        } else if (option === "viridis") {
          // This is from the matplotlib 'viridis' colormap
          document.getElementById("color1").value = "#440154";
          document.getElementById("color2").value = "#482173";
          document.getElementById("color3").value = "#433e85";
          document.getElementById("color4").value = "#38588c";
          document.getElementById("color5").value = "#2d708e";
          document.getElementById("color6").value = "#25858e";
          document.getElementById("color7").value = "#1e9b8a";
          document.getElementById("color8").value = "#2ab07f";
          document.getElementById("color9").value = "#52c569";
          document.getElementById("color10").value = "#86d549";
          document.getElementById("color11").value = "#c2df23";
          document.getElementById("color12").value = "#fde725";
        } else if (option === "spectral") {
          // This is from the matplotlib 'Spectra' colormap
          document.getElementById("color1").value = "#9e0142";
          document.getElementById("color2").value = "#d0384e";
          document.getElementById("color3").value = "#ee6445";
          document.getElementById("color4").value = "#fa9b58";
          document.getElementById("color5").value = "#fece7c";
          document.getElementById("color6").value = "#fff1a8";
          document.getElementById("color7").value = "#f4faad";
          document.getElementById("color8").value = "#d1ed9c";
          document.getElementById("color9").value = "#97d5a4";
          document.getElementById("color10").value = "#5cb7aa";
          document.getElementById("color11").value = "#3682ba";
          document.getElementById("color12").value = "#5e4fa2";
        } else if (option === "tab") {
          // This is from the matplotlib 'tab20' colormap
          document.getElementById("color1").value = "#1f77b4";
          document.getElementById("color2").value = "#ff7f0e";
          document.getElementById("color3").value = "#2ca02c";
          document.getElementById("color4").value = "#d62728";
          document.getElementById("color5").value = "#9467bd";
          document.getElementById("color6").value = "#8c564b";
          document.getElementById("color7").value = "#e377c2";
          document.getElementById("color8").value = "#7f7f7f";
          document.getElementById("color9").value = "#bcbd22";
          document.getElementById("color10").value = "#17becf";
          document.getElementById("color11").value = "#3e3e3e";
          document.getElementById("color12").value = "#f1f7a2";
        } else if (option === "earth") {
          // This is from the matplotlib 'terrain' colormap
          document.getElementById("color1").value = "#333399";
          document.getElementById("color2").value = "#1470d6";
          document.getElementById("color3").value = "#00a8d0";
          document.getElementById("color4").value = "#15d06a";
          document.getElementById("color5").value = "#75e37d";
          document.getElementById("color6").value = "#d1f690";
          document.getElementById("color7").value = "#e8e28d";
          document.getElementById("color8").value = "#baa774";
          document.getElementById("color9").value = "#8a695a";
          document.getElementById("color10").value = "#a38984";
          document.getElementById("color11").value = "#d1c4c1";
          document.getElementById("color12").value = "#383838";
        } else if (option === "simple") {
          // From Sasha Trubetskoy's "20 Simple, Distinct Colors"
          document.getElementById("color1").value = "#e6194B";
          document.getElementById("color2").value = "#3cb44b";
          document.getElementById("color3").value = "#ffe119";
          document.getElementById("color4").value = "#4363d8";
          document.getElementById("color5").value = "#f58231";
          document.getElementById("color6").value = "#911eb4";
          document.getElementById("color7").value = "#42d4f4";
          document.getElementById("color8").value = "#f032e6";
          document.getElementById("color9").value = "#bfef45";
          document.getElementById("color10").value = "#fabed4";
          document.getElementById("color11").value = "#469990";
          document.getElementById("color12").value = "#dcbeff";
        }
      }
    </script>

    <!-- NAVBAR -->
    <nav
      class="navbar bg-body-tertiary border-bottom border-bottom-dark"
      data-bs-theme="dark"
    >
      <div class="container-fluid">
        <!-- Left Menu -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarTogglerDemo03"
          aria-controls="navbarTogglerDemo03"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
          <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
              <a
                class="nav-link active"
                aria-current="page"
                href="meteogram.html"
                >Meteogram</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/blaylockbk/Herbie">🏁 Herbie</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/blaylockbk/goes2go">🌎 GOES-2-go</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="https://github.com/blaylockbk/SynopticPy">🌡️ SynopticPy</a>
            </li>
          </ul>
        </div>
        <!-- Title -->
        <a class="navbar-brand"
          ><h2 style="display: inline">Station Timeseries</h2></a
        >
        <!-- README button; trigger modal -->
        <button
          type="button"
          class="btn btn-outline-info"
          data-bs-toggle="modal"
          data-bs-target="#exampleModal"
        >
          README
        </button>
      </div>
    </nav>

    <!-- Modal Content -->
    <div
      class="modal fade"
      id="exampleModal"
      tabindex="-1"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h1 class="modal-title fs-5" id="exampleModalLabel">
              Brian Blaylock's Station Timeseries Web App
            </h1>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body" style="font-size: 15px; text-align: left">
            This station timeseries app is used to plot a single variable of
            weather data from one or more weather stations on the same figure.
            It gets data from the Synoptic Mesonet API, processes it with
            Pandas, and plots a timeseries of the data with matplotlib. This is
            all done in your browser powered by
            <a href="https://pyscript.net/">pyscript</a>.

            <hr />
            <strong>Token:</strong>
            You may insert your own
            <a
              href="https://developers.synopticdata.com/mesonet/v2/getting-started/"
              target="_blank"
              >Synoptic API token</a
            >
            below. If left blank, you will use one of my free-tier tokens
            <i
              >which may be limited if more than 4+ people are using this page
              at the same time</i
            >. Using your own token prevents running into this problem and gives
            you access to features you may have for your account.
            <div class="input-group mb-3">
              <a
                type="button"
                class="btn btn-danger"
                href="https://customer.synopticdata.com/credentials/"
                target="_blank"
                title="Help me find my token..."
                >Token</a
              >
              <input
                type="text"
                id="tokenInput"
                class="form-control"
                placeholder="Synoptic API Token"
              />
            </div>

            <div class="accordion" id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="false"
                    aria-controls="collapseOne"
                  >
                    Stations Selector
                  </button>
                </h2>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <strong>Stations:</strong> A comma-separated list of station
                    IDs, e.g. <kbd>PSRIM,PSINK</kbd>. If you don't know the
                    station ID, you can search on
                    <a href="https://mesowest.utah.edu/" target="_blank"
                      >Mesowest</a
                    >.

                    <p>
                      With some knowledge of the Synoptic Mesonet API, you can
                      make more complex station queries. Instead of a list of
                      stations, you can instead provide
                      <a
                        target="_blank"
                        href="https://developers.synopticdata.com/mesonet/v2/stations/timeseries/"
                        >station selection parameters</a
                      >
                      to refine your station selection. This string is inserted
                      in the API request, so you need to separate each argument
                      with a
                      <code>&</code>. For example:
                    </p>

                    <ul class="spaced-list">
                      <li>
                        <kbd>radius=wbb,5</kbd> All stations within a 5 mile
                        radius of <code>WBB</code>.
                      </li>
                      <li>
                        <kbd>radius=wbb,5&limit=10</kbd>
                        <code>10</code> stations nearest <code>WBB</code> within
                        a <code>5</code> mile radius.
                      </li>
                      <li>
                        <kbd>radius=WBB,5&limit=10&stid=!MTMET</kbd> Same as
                        above, but exclude the station <code>MTMET</code>.
                      </li>
                      <li>
                        <kbd>radius=WBB,20&network=153</kbd> Stations within
                        <code>20</code> miles of <code>WBB</code> that belong to
                        the <code>UUNET</code> network. (See list of
                        <a
                          href="https://developers.synopticdata.com/about/station-providers/"
                          >network providers</a
                        >.)
                      </li>
                      <li>
                        <kbd>radius=KSLC,40&network=1,2&limit=8</kbd>
                        <code>8</code> stations within <code>40</code> miles of
                        <code>KSLC</code> that belong to the
                        <code>ASOS/AWOS</code> and <code>RAWS</code> networks.
                        (See list of
                        <a
                          href="https://developers.synopticdata.com/about/station-providers/"
                          >network providers</a
                        >.)
                      </li>
                      <li>
                        <kbd>radius=41.5,-120.25,20&limit=10</kbd>
                        <code>10</code> stations within <code>20</code> miles of
                        the <code>latitude,longitude</code>
                        location.
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo"
                    aria-expanded="false"
                    aria-controls="collapseTwo"
                  >
                    Variable Selector
                  </button>
                </h2>
                <div
                  id="collapseTwo"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <strong>Variable:</strong> Select the variable you wish to
                    plot.
                  </div>
                </div>
              </div>
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseThree"
                    aria-expanded="false"
                    aria-controls="collapseThree"
                  >
                    Start and End Datetime
                  </button>
                </h2>
                <div
                  id="collapseThree"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <strong>Start and End Datetime:</strong>
                    There are three ways to specify the plot's time range:
                    <ol>
                      <li>
                        "Start at <code>[datetime]</code> and end at
                        <code>[datetime]</code>."
                      </li>
                      <li>
                        "Start at <code>[datetime]</code> and end
                        <code>[timedelta]</code> later."
                      </li>
                      <li>
                        "Start <code>[timedelta]</code> before the end
                        <code>[datetime]</code>."
                      </li>
                    </ol>

                    <strong>Start Time:</strong> Specify the starting time for
                    the plot. This must be a Pandas-parsable datetime string
                    <kbd>YYYY-MM-DD HH:MM</kbd> <i>or</i> if an End datetime is
                    given, a Pandas-parsable timedelta such as
                    <kbd>30min</kbd> for 30 minutes, <kbd>12H</kbd> for 12
                    hours, <kbd>3D</kbd> for 3 days.
                    <br />
                    <br />
                    <strong>End Time:</strong> Specify the ending time for the
                    plot. This must be a Pandas-parsable datetime string
                    <kbd>YYYY-MM-DD HH:MM</kbd> <i>or</i> if a Start datetime is
                    given, a Pandas-parsable timedelta such as
                    <kbd>30min</kbd> for 30 minutes, <kbd>12H</kbd> for 12
                    hours, <kbd>3D</kbd> for 3 days.
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseSmooth"
                      aria-expanded="false"
                      aria-controls="collapseSmooth"
                    >
                      Smoothing Options
                    </button>
                  </h2>
                  <div
                    id="collapseSmooth"
                    class="accordion-collapse collapse"
                    data-bs-parent="#accordionExample"
                  >
                    <div class="accordion-body">
                      <strong>Smoother:</strong>
                      You can "smooth" the data using two different methods
                      built into Pandas:

                      <ol>
                        <li>
                          <a
                            href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.resample.html"
                            target="_blank"
                            >Resample</a
                          >: Reduces the amount of data points to interval
                          selected by computing a statistic for the time window.
                          This is useful for showing the "daily maximum
                          temperature" for the time period.
                        </li>
                        <li>
                          <a
                            href="https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.rolling.html"
                            target="_blank"
                            >Rolling</a
                          >: Returns the same amount of data points but value
                          (i.e. mean, max, min) is computed over a rolling time
                          window.
                        </li>
                      </ol>
                      Also specify the time window (as a Pandas-parsable
                      timedelta) and the statistic to compute in the time window
                      (e.g. Mean). Note: wind direction statistics uses
                      <a
                        ref="https://docs.scipy.org/doc/scipy/reference/stats.html#directional-statistical-functions"
                        >SciPy Directional Statistics</a
                      >. Also, "Spread" is a special case that is intended to be
                      used with the "Resample" method; it shows a bar of the
                      max, min, median, and a diamond for the mean within the
                      Resample time window. plot.
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseFour"
                      aria-expanded="false"
                      aria-controls="collapseFour"
                    >
                      Color Scheme
                    </button>
                  </h2>
                  <div
                    id="collapseFour"
                    class="accordion-collapse collapse"
                    data-bs-parent="#accordionExample"
                  >
                    <div class="accordion-body">
                      Specify the colors you want each line. Maybe you have lots
                      of stations plotted, but want to highlight only one; you
                      can make that station "red" and the others a shade of
                      grey. Note that colors are reused if there are more
                      stations than colors.
                      <br />There are some predefined color schemes to make it
                      easy to change all the colors at once or reset to the
                      default color scheme. Just click the drop down next to the
                      colors and select one of the schemes for one you like.
                    </div>
                  </div>
                </div>
                <div class="accordion-item">
                  <h2 class="accordion-header">
                    <button
                      class="accordion-button collapsed"
                      type="button"
                      data-bs-toggle="collapse"
                      data-bs-target="#collapseFive"
                      aria-expanded="false"
                      aria-controls="collapseFive"
                    >
                      Units and Timezone Toggles
                    </button>
                  </h2>
                  <div
                    id="collapseFive"
                    class="accordion-collapse collapse"
                    data-bs-parent="#accordionExample"
                  >
                    <div class="accordion-body">
                      <strong>Toggles:</strong>
                      Toggle units to be returned in English or Metric units.
                      Also toggle if time is local or UTC.
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div style="font-size: 12px">
              <i class="fa-brands fa-github"></i>
              <a href="https://github.com/blaylockbk/SynopticPy" target="_blank"
                >SynopticPy </a
              >|
              <a
                href="https://github.com/blaylockbk/SynopticPy/issues"
                target="_blank"
                >Submit Issue</a
              >|
              <a
                href="https://github.com/blaylockbk/SynopticPy/discussions"
                target="_blank"
                >Ask Question</a
              >|

              <a
                href="https://github.com/blaylockbk/SynopticPy/blob/main/web/timeseries.html"
                target="_blank"
                >Edit Page</a
              >|
              <a
                href="https://github.com/blaylockbk/SynopticPy/blob/main/web/timeseries.py"
                target="_blank"
                >Edit Plot</a
              >
              <br />
            </div>
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <br />
      <div align="center" class="contentText form-group">
        <!-- FIRST ROW -->
        <div class="row align-items-center">
          <div class="col-sm-6">
            <!-- Station Selector ----------------------->
            <!-- prettier-ignore -->
            <div class="input-group mb-3">
              <!-- <button type="button" class="btn"><i class="fa-regular fa-circle-question"></i></button> -->
              <span class="input-group-text" id="stid">Stations</span>
              <button
                type="button"
                class="btn btn-secondary dropdown-toggle dropdown-toggle-split"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                style="
                  background-color: var(--bs-tertiary-bg);
                  border: var(--bs-border-width) solid var(--bs-border-color);
                  color: var(--bs-body-color);
                "
              ></button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="changeStations('Peter Sinks')">Peter Sinks</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('Monterey & Spanish Fork')">Monterey & Spanish Fork</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('Monterey, CA')">Monterey, CA</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('Family')">Family</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('John Horel')">John Horel</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('University of Utah')">University of Utah</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('Arches National Park')">Arches National Park</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeStations('Western States')">Western States</a></li>
              </ul>
              <input
                type="text"
                id="stidInput"
                spellcheck="false"
                class="form-control"
                value="PSRIM,PSINK"
                title="Comma-separated list of Station IDs or Synoptic API Station Selector string"
              />
            </div>
          </div>
          <div class="col-sm-6">
            <!-- Variable ----------------------->
            <!-- prettier-ignore -->
            <div class="input-group mb-3">
              <label class="input-group-text" for="variable">Variable</label>
              <select class="form-select" id="variableSelector">
                <option disabled style="font-size: 0.5em"></option>
                <option selected="selected" value="air_temp">🌡️ Air Temperature</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="relative_humidity">💧 Relative Humidity</option>
                <option value="dew_point_temperature">💦 Dew Point</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="wind_speed">🍃 Wind Speed</option>
                <option value="wind_direction">🧭 Wind Direction</option>
                <option value="wind_gust">🌬️ Wind Gust</option>
                <option value="wind_direction,wind_speed" disabled>🏹 Wind Barbs</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="precip">☔ Accumulated Precipitation</option>
                <option value="snow_depth">❄️ Snow Depth</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="pressure">🎈 Pressure</option>
                <option value="altimeter">🏔️ Altimeter</option>
                <option value="sea_level_pressure">⛵ Sea Level Pressure</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="solar_radiation">☀️ Solar Radiation</option>
                <option value="volt">🔋 Battery Voltage</option>

                <option disabled style="font-size: 0.5em"></option>
                <option value="PM_25_concentration">🏭 PM 2.5 Concentration</option>
                <option value="ozone_concentration">😎 Ozone Concentration</option>
              </select>
            </div>
          </div>
        </div>
        <!-- SECOND ROW -->
        <div class="row align-items-center">
          <div class="col-sm-6">
            <!-- Start Time ----------------------->
            <div class="input-group mb-3">
              <span class="input-group-text" id="startTime"
                >Start time (UTC)</span
              >
              <input
                type="text"
                id="startTimeInput"
                class="form-control"
                spellcheck="false"
                value="18H"
                title="Pandas-parsable datetime (e.g., YYYY-MM-DD HH:MM) or timedelta (e.g., 30min, 1H, 6H)"
              />
            </div>
          </div>
          <div class="col-sm-6">
            <!-- End Time ----------------------->
            <div class="input-group mb-3">
              <span class="input-group-text" id="endTime">End time (UTC)</span>
              <input
                type="text"
                class="form-control"
                spellcheck="false"
                id="endTimeInput"
                placeholder="YYYY-MM-DD HH:MM"
                title="Pandas-parsable datetime (e.g., YYYY-MM-DD HH:MM) or timedelta (e.g., 30min, 1H, 6H)"
              />
            </div>
            <script>
              // Get the input element by ID
              var endTimeInput = document.getElementById("endTimeInput");

              // Create a new Date object with the current datetime
              var currentDate = new Date();

              // Format the datetime as YYYY-MM-DD HH:MM
              var formattedDatetime = currentDate
                .toISOString()
                .slice(0, 16)
                .replace("T", " ");

              // Set the formatted datetime as the value of the input element
              endTimeInput.value = formattedDatetime;
            </script>
          </div>
        </div>

        <!-- FOURTH ROW -->
        <div class="row align-items-center">
          <div class="col-sm-6">
            <!-- Smoother ----------------------->
            <div class="input-group mb-3">
              <div class="input-group mb-3">
                <label class="input-group-text" for="smoothing">Smoother</label>
                <select
                  class="form-select"
                  id="smootherSelector1"
                  onchange="checkInputValue()"
                >
                  <option selected="selected" value="none">None</option>
                  <option value="resample">Resample</option>
                  <option value="rolling">Rolling</option>
                </select>
                <input
                  type="text"
                  id="smootherInput"
                  class="form-control"
                  value="30min"
                  title="Pandas-parsable timedelta (e.g., 30min, 1H, 6H)"
                  disabled
                />
                <select class="form-select" id="smootherSelector2" disabled>
                  <option selected="selected" value="mean">Mean</option>
                  <option value="max">Max</option>
                  <option value="min">Min</option>
                  <option value="median">Median</option>
                  <option value="std">Standard Deviation</option>
                  <option value="var">Variance</option>
                  <option value="count">Count</option>
                  <option value="spread">Spread</option>
                </select>
              </div>
            </div>
          </div>
          <div class="col-sm-6">
            <!-- Colors ----------------------->
            <!-- prettier-ignore -->
            <div class="input-group mb-3">
              <label class="input-group-text" for="colorCycle"
                >Colors</label
              >
              <button
                type="button"
                class="btn btn-secondary dropdown-toggle dropdown-toggle-split"
                data-bs-toggle="dropdown"
                aria-expanded="false"
                style="background-color:var(--bs-tertiary-bg);border: var(--bs-border-width) solid var(--bs-border-color);    color: var(--bs-body-color);">
              </button>
              <ul class="dropdown-menu">
                <li><a class="dropdown-item" href="#" onclick="changeColors('default')">Default</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('greys')">Greys</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('fall')">Fall</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('viridis')">Viridis</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('spectral')">Spectral</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('tab')">Tab</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('earth')">Earth</a></li>
                <li><a class="dropdown-item" href="#" onclick="changeColors('simple')">Simple</a></li>
              </ul>

              <input type="color" class="form-control form-control-color" name="color" value="#0d6efd" title="Choose color" id="color1">
              <input type="color" class="form-control form-control-color" name="color" value="#dc3545" title="Choose color" id="color2">
              <input type="color" class="form-control form-control-color" name="color" value="#fd7e14" title="Choose color" id="color3">
              <input type="color" class="form-control form-control-color" name="color" value="#198754" title="Choose color" id="color4">
              <input type="color" class="form-control form-control-color" name="color" value="#0dcaf0" title="Choose color" id="color5">
              <input type="color" class="form-control form-control-color" name="color" value="#563d7c" title="Choose color" id="color6">
              <input type="color" class="form-control form-control-color" name="color" value="#ffc107" title="Choose color" id="color7">
              <input type="color" class="form-control form-control-color" name="color" value="#262626" title="Choose color" id="color8">
              <input type="color" class="form-control form-control-color" name="color" value="#6610f2" title="Choose color" id="color9">
              <input type="color" class="form-control form-control-color" name="color" value="#20c997" title="Choose color" id="color10">
              <input type="color" class="form-control form-control-color" name="color" value="#e83e8c" title="Choose color" id="color11">
              <input type="color" class="form-control form-control-color" name="color" value="#a64dff" title="Choose color" id="color12">
            </div>
          </div>
        </div>
        <!-- THIRD ROW -->
        <div class="row align-items-center">
          <!-- Units toggle----------------------->
          <div class="col-sm-3">
            <div class="input-group mb-3">
              <div class="btn-group" role="group" aria-label="Basic example">
                <input
                  type="radio"
                  class="btn-check"
                  name="unitsRadioOptions"
                  id="unitsRadio1"
                  autocomplete="off"
                  value="english"
                  checked
                />
                <label class="btn btn-outline-secondary btn-sm" for="unitsRadio1"
                  >English Units</label
                >
                <input
                  type="radio"
                  class="btn-check"
                  name="unitsRadioOptions"
                  id="unitsRadio2"
                  autocomplete="off"
                  value="metric"
                />
                <label class="btn btn-outline-secondary btn-sm" for="unitsRadio2"
                  >Metric Units</label
                >
              </div>
            </div>
          </div>
          <!-- (Units toggle) -->
          <!-- timezone toggle----------------------->
          <div class="col-sm-3">
            <div class="input-group mb-3">
              <div class="btn-group" role="group" aria-label="Basic example">
                <input
                  type="radio"
                  class="btn-check"
                  name="timezoneRadioOptions"
                  id="timezoneRadio1"
                  autocomplete="off"
                  value="local"
                  checked
                />
                <label class="btn btn-outline-secondary btn-sm" for="timezoneRadio1"
                  >Local Time</label
                >
                <input
                  type="radio"
                  class="btn-check"
                  name="timezoneRadioOptions"
                  id="timezoneRadio2"
                  autocomplete="off"
                  value="utc"
                />
                <label class="btn btn-outline-secondary btn-sm" for="timezoneRadio2"
                  >UTC Time</label
                >
              </div>
            </div>
          </div>
          <!-- (timezone toggle) -->
          <div class="col-sm-6">
            <!-- Submit Button -->
            <div class="form-group" style="padding-top: 10px">
              <div class="d-grid gap-2 col-6 mx-auto">
                <button
                  type="submit"
                  class="btn btn-success btn-lg"
                  py-click="main(display)"
                  id="display"
                >
                  Make Plot
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <hr />

      <!-- CONTENT TABS  -->
      <ul class="nav nav-tabs" id="myTab" role="tablist">
        <li class="nav-item" role="presentation">
          <button
            class="nav-link active"
            id="timeseries-tab"
            data-bs-toggle="tab"
            data-bs-target="#timeseries-tab-pane"
            type="button"
            role="tab"
            aria-controls="timeseries-tab-pane"
            aria-selected="true"
          >
            Timeseries
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="map-tab"
            data-bs-toggle="tab"
            data-bs-target="#map-tab-pane"
            type="button"
            role="tab"
            aria-controls="map-tab-pane"
            aria-selected="false"
          >
            Map
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button
            class="nav-link"
            id="station-tab"
            data-bs-toggle="tab"
            data-bs-target="#station-tab-pane"
            type="button"
            role="tab"
            aria-controls="station-tab-pane"
            aria-selected="false"
          >
            Station Info
          </button>
        </li>
      </ul>
      <div class="tab-content" id="myTabContent">
        <!-- Timeseries Figure Tab -->
        <div
          class="tab-pane fade show active"
          id="timeseries-tab-pane"
          role="tabpanel"
          aria-labelledby="timeseries-tab"
          tabindex="0"
        >
          <div id="figure-timeseries" align="center"></div>
        </div>

        <!-- Map Figure Tab -->
        <div
          class="tab-pane fade"
          id="map-tab-pane"
          role="tabpanel"
          aria-labelledby="map-tab"
          tabindex="0"
        >
          <div id="figure-map" align="center"></div>
        </div>

        <!-- Station Info Tab -->
        <div
          class="tab-pane fade"
          id="station-tab-pane"
          role="tabpanel"
          aria-labelledby="station-tab"
          tabindex="0"
        >
          <div id="station-info"></div>
        </div>
      </div>
      <!-- (CONTENT TABS)  -->

      <!-- Bottom material -->
      <br />
      <hr />
      <div style="float: left">
        <div id="json-download"></div>
      </div>
      <div style="float: right">
        <i class="fa-brands fa-github"></i>
        <a href="https://github.com/blaylockbk/SynopticPy" target="_blank"
          >SynopticPy
        </a>
      </div>
      <br /><br /><br />
      <py-terminal></py-terminal>
    </div>

    <!-- prettier-ignore -->
    <py-script>
      from timeseries import main
      print()
      print("Making new API request...")
      fig = main(display)

    </py-script>

    <style>
      img {
        max-width: 98%;
        align-items: center;
      }
    </style>
  </body>
</html>
